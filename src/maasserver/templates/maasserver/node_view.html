{% extends "maasserver/base.html" %}

{% block nav-active-settings %}active{% endblock %}
{% block title %}Node: {{ node.hostname }}{% endblock %}
{% block page-title %}Node: {{ node.hostname }}{% endblock %}
{% block layout-modifiers %}sidebar{% endblock %}

{% block sidebar %}
  <h4>Node details</h4>
    {% if can_edit %}
      <a href="{% url 'node-edit' node.system_id %}" class="button secondary">
        Edit node
      </a>
    {% endif %}
    <a href="{% url 'node-preseed-view' node.system_id %}" class="button secondary">
      View preseed
    </a>
  {% if form.action_buttons %}
    <h4>Actions</h4>
    <form id="node_actions" method="post" action=".">{% csrf_token %}
      {% for action in form.action_buttons %}
        <input
          class="secondary
                 {% if action.inhibition %}disabled{% endif %}
                 {% if not forloop.first %}space-top{% endif %}"
          type="submit"
          name="{{ form.input_name }}"
          value="{{ action.display }}"
          {% if action.inhibition %}}
            title="{{ action.inhibition }}"
            disabled="disabled"
          {% endif %}
          />
      {% endfor %}
    </form>
  {% endif %}
{% endblock %}

{% block content %}
  <ul class="data-list">
    <li class="block size2 first">
      <h4>Hostname</h4>
      <span>{{ node.hostname }}</span>
    </li>
    <li class="block size3">
      <h4>MAC addresses</h4>
      <span>
          {% for mac in node.macaddress_set.all %}
          {{ mac }}{% if not forloop.last %}, {% endif %}
          {% endfor %}
      </span>
    </li>
    <li class="block size3">
      <h4>Status</h4>
      <span>
          {{ node.display_status }}
      </span>
    </li>
    {% if error_text %}
    <li class="block first">
      <h4>Error output</h4>
      <span>{{ error_text }}</span>
    </li>
    {% endif %}
    {% if status_text %}
    <li class="block first">
      <h4>Console output</h4>
      <span>{{ status_text }}</span>
    </li>
    {% endif %}
    {% if node.owner %}
    <li class="block size2 first">
      <h4>Owner</h4>
      <span>{{ node.owner }}</span>
    </li>
    {% endif %}
  </ul>
{% endblock %}
