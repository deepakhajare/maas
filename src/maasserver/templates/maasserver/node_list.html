{% extends "maasserver/base.html" %}

{% block nav-active-node-list %}active{% endblock %}
{% block title %}Nodes{% endblock %}
{% block page-title %}Nodes{% endblock %}

{% block html_includes %}{% include "maasserver/snippets.html" %}
{% endblock %}

{% block head %}
  <script type="text/javascript">
  <!--
  YUI().use('maas.add_node', function (Y) {
    Y.on('load', function() {
      Y.one('#addnode').on('click', Y.maas.add_node.showAddNodeWidget);
    });
  });
  // -->
  </script>
{% endblock %}

{% block content %}
  <h2>{{ node_list|length }} node{{ node_list|length|pluralize }} in this cluster</h2>
  {% if node_list|length %}
    <table>
      <thead>
        <tr>
          <th>System ID</th>
          <th>Hostname</th>
          <th>MAC</th>
          <th>Status</th>
        </tr>
      </thead>
      {% for node in node_list %}
        <tr class="node {% cycle 'even' 'odd' %}">
          <td class="node-system_id">{{ node.system_id }}</td>
          <td>{{ node.hostname }}</td>
          <td>
            {{ node.macaddress_set.reverse|first }}
            {% if node.macaddress_set.count > 1 %}
            ,â€¦ ({{ node.macaddress_set.count|add:"-1" }} more MAC Address(es))
            {% endif %}
          </td>
          <td>{{ node.display_status }}</td>
        </tr>
      {% endfor %}
    </table>
  {% endif%}
  <a id="addnode" href="#">Add Node</a>
{% endblock %}
